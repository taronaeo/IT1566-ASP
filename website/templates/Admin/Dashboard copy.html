<head><script src="https://cdn.tailwindcss.com"></script></head>
<div class="flex">
  <!-- sidebar -->
  <div class="w-50 flex flex-col bg-blue-500">
    <div class="flex items-center justify-center">
      <div class="flex items-center">
        <span class="text-2xl font-semibold text-gray-800 dark:text-white">Admin Dashboard</span>
      </div>
    </div>

    <nav class="h-screen w-64 bg-gray-800">
      <ul class="text-white">
        <li class="px-4 py-2 text-lg font-medium"><a href="#accounts" class="text-white">Accounts</a></li>
        <li class="px-4 py-2 text-sm">
          <ul>
            <li><a href="#users" class="text-white">Users</a></li>
            <li><a href="#contractors" class="text-white">Contractors</a></li>
          </ul>
        </li>
        <li class="px-4 py-2 text-lg font-medium"><a href="#listings" class="text-white">Listings</a></li>
        <li class="px-4 py-2 text-sm">
          <ul>
            <li><a href="#contractor-listings" class="text-white">Contractor Listings</a></li>
            <li><a href="#car-listings" class="text-white">Car Listings</a></li>
          </ul>
        </li>
        <li class="px-4 py-2 text-lg font-medium"><a href="#wallet" class="text-white">Wallet</a></li>
        <li class="px-4 py-2 text-sm">
          <ul>
            <li><a href="#e-wallet" class="text-white">E-wallet</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Table!-->
  <div class="mx-auto">
    <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
      <table class="w-full text-left text-sm text-gray-500 dark:text-gray-400">
        <thead class="bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400">
          <tr>
            <th scope="col" class="px-6 py-3">UID</th>
            <th scope="col" class="px-6 py-3">Name</th>
            <th scope="col" class="px-6 py-3">Contact Number</th>
            <th scope="col" class="px-6 py-3">Email Address</th>
            <th scope="col" class="px-6 py-3">Home Address</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b bg-white hover:bg-gray-500 dark:border-gray-700 dark:bg-gray-900">
            <th scope="row" class="whitespace-nowrap px-6 py-4 font-medium text-gray-900 dark:text-white">T010229J</th>
            <td class="px-6 py-4">John Tan</td>
            <td class="px-6 py-4">8391 1251</td>
            <td class="px-6 py-4">test123@gmail.com</td>
            <td class="px-6 py-4">Yishun Avenue 69</td>
            <td class="px-6 py-4">
              <a href="#" id="testbtn"class="font-medium text-blue-600 hover:underline dark:text-blue-500">Edit</a>
            </td>
            <td class="px-6 py-4">
              <a href="#" class="font-medium text-red-600 hover:underline dark:text-red-500" id = 'delete-button' onclick = 'show_confirmation()'>Delete </a>
            </td>
          </tr>
          <tr class="border-b bg-gray-50 hover:bg-gray-500 dark:border-gray-700 dark:bg-gray-800">
            <th scope="row" class="whitespace-nowrap px-6 py-4 font-medium text-gray-900 dark:text-white">S192392I</th>
            <td class="px-6 py-4">Jane Lim</td>
            <td class="px-6 py-4">8391 1928</td>
            <td class="px-6 py-4">Email123@gmail.com</td>
            <td class="px-6 py-4">Hougang Street 21</td>
            <td class="px-6 py-4">
              <a href="#" class="font-medium text-blue-600 hover:underline dark:text-blue-500">Edit</a>
            </td>
            <td class="px-6 py-4">
              <a href="#" class="font-medium text-red-600 hover:underline dark:text-red-500 " id = 'delete-button' onclick = 'show_confirmation()'>Delete</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


  
  </div>
  
</div>
<!--Delete-->
  <div class = ' hidden w-full fixed z-40 inset-0 bg-slate-500/50 ' id = 'popup-overlay'>
    <div class = 'bg-white px-8 py-6 rounded-lg absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50' id = 'confirmation'>
      <span id = 'confirmation-text'>
      Are you sure you want to <span class = 'font-semibold'>Permanently</span> delete this users's account?
      </span> 
      <span id = 'success-delete' class = 'hidden  font-semibold'>Account Successfully Deleted</span>
      <div class=" w-full flex flex-row gap-1 p-4 my-4 text-sm text-red-800 bg-red-100 rounded-lg" id = 'delete-warning'>
          <img class = 'flex w-5 h-5' src="/img/exclaimation.svg" alt="Exclaimation Icon">WARNING: This action cannot be undone!
        </div>
        <div class = 'text-center'>
          <button class="mt-3 w-32 px-4 py-2 font-bold text-orange-500 border-2 border-orange-500 duration-200 ease-out rounded-md hover:bg-orange-700 focus:outline-none focus:shadow-outline" id = 'cancel-button' onclick = 'cancel_delete()'>
              Cancel
          </button>
          <button onclick = 'delRequest()' class="mt-3 w-32 px-4 py-2 font-bold border-2 border-orange-500 text-white bg-orange-500   rounded-md hover:bg-orange-700 focus:outline-none focus:shadow-outline" id = 'confirm-button'>
            Confirm
          </button>
        </div>

    
    </div>
  </div>

  <!--Update-->
  <div class = ' w-full fixed z-40 inset-0 bg-slate-500/50 ' id = 'popup-overlay'>
    <div class = 'bg-white px-8 py-6 rounded-lg absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50' id = 'confirmation'>
      <form>
        <div class="mb-4">
          <label class="block font-bold mb-2" for="full-name">UID</label>
          <input class="w-full px-3 py-2 rounded-lg shadow-sm" type="text" id="full-name" placeholder="S1023123">
        </div>
        <div class="mb-4">
          <label class="block font-bold mb-2" for="Name">Name</label>
          <input class="w-full px-3 py-2 rounded-lg shadow-sm" type="text" id="dob" placeholder="John Tan">
        </div>
        <div class="mb-4">
          <label class="block font-bold mb-2" for="contact-number">Contact Number</label>
          <input class="w-full px-3 py-2 rounded-lg shadow-sm" type="tel" id="contact-number" placeholder="8391 2912">
        </div>
        <div class="mb-4">
          <label class="block font-bold mb-2" for="contact-number">Password</label>
          <input class="w-full px-3 py-2 rounded-lg shadow-sm" type="text" id="password" placeholder="Testpassword123">
        </div>
        
        
      </form>
      <button class="mt-3 w-32 px-4 py-2 font-bold text-blue-500 border-2 border-blue-500 duration-200 ease-out rounded-md hover:bg-blue-700 focus:outline-none focus:shadow-outline" id = 'cancel-button' onclick = 'cancel_update()'>
        Cancel
    </button>
    <button onclick = 'updateRequest()' class="mt-3 w-32 px-4 py-2 font-bold border-2 border-blue-500 text-white bg-blue-500   rounded-md hover:bg-blue-700 focus:outline-none focus:shadow-outline" id = 'confirm-button'>
      Update
    </button>

    
    </div>
  </div>



  

  
</div>

<script>
  const userapi_url = {{url_for()}}
  
  
  
  
  
  
  
  function updateRequest(){
    let confirmation
  }
  function delRequest(){
      let confirmation_text = document.getElementById('confirmation-text');
      let success_delete = document.getElementById('success-delete');
      let cancel_button = document.getElementById('cancel-button');
      let confirm_button= document.getElementById('confirm-button');

      success_delete.classList.remove('hidden');
x 
      confirmation_text.classList.add('hidden');
      cancel_button.classList.add('hidden');
      confirm_button.classList.add('hidden');


      fetch(`${userapi_url}/${user_email}`, {
                "method": "DELETE",
                "redirect": 'follow',
                "headers": {"Content-Type": "application/json"},
            })
            .then(setTimeout(() => window.location.href = '/', 1500))
    }

  function show_confirmation(){
      let overlay = document.getElementById('popup-overlay');
      overlay.classList.remove('hidden')
    }
    function cancel_delete(){
      let overlay = document.getElementById('popup-overlay');
      overlay.classList.add('hidden')
    }

</script>

