{% extends 'base.html' %}

{% block title %}Job End{% endblock %}

{% block content %}

{% with alerts = get_flashed_messages() %}
  {% if alerts %}
  {% for alert in alerts %}
  <div class="p-4 col-span-1 md:col-span-2 flex flex-row gap-1 text-sm text-red-800 bg-red-100 rounded-lg" role="alert">
    <div class="w-5 h-5">
      <img src="/img/exclaimation.svg" alt="Exclaimation Icon" draggable="false">
    </div>

    <p class="grow">
      {{alert}}
    </p>
  </div>
  {% endfor %}
  {% endif %}
  {% endwith %}

<div class="container mx-auto px-4">
    <header class=" py-6 bg-blue-500 border-b border-gray-300">
        <h1 class="text-center text-3xl font-bold text-white mb-2">Job End</h1>
    </header>
    <div class="grid flex-auto bg-white rounded-lg shadow-lg p-8 pb-2 mb-6">
        <h1 class="font-bold">Exterior Photos</h1>
        <p class="py-4">Upload photos of all four angles of the customer's car after washing.</p>
        <div class="grid grid-cols-4 gap-2 md:gap-32">
        <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          
        </div>
          
          <p class="py-4 mt-2 font-light text-sm text-gray-500">
            Take a photo of the exterior outlook of the vehicle. Remember to get every angle of the car.
          </p>
    </div>
    <div class="grid flex-auto bg-white rounded-lg shadow-lg p-8 pb-2 mb-6">
        <h1 class="font-bold">Interior Photos (Optional)</h1>
        <p class="py-4">Upload photos of the car's interior after interior detailing.</p>
        <div class="grid grid-cols-4 gap-2 md:gap-32">
        <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          <div>
            <label for="vehicle_img" class="font-light">Vehicle Image</label>
            <label id="vehicle_img_box" for="vehicle_img"
              class="aspect-video w-full rounded-lg flex flex-col items-center justify-center border-2 border-gray-300 border-dashed cursor-pointer active:bg-blue-50 active:border-blue-300">
              <div class="flex flex-col items-center justify-center py-6">
                <img src="/img/upload.svg" alt="Upload Icon" class="mb-3 w-5 h-5">
                <p class="mb-2 text-sm text-gray-500">Click to upload</p>
                <p class="text-xs text-gray-500">PNG or JPG (Max 1 MB)</p>
              </div>
              <input type="file" name="vehicle_img" id="vehicle_img" accept="image/png, image/jpeg" class="hidden">
            </label>
          </div>
          
        </div>
          
          <p class="py-4 mt-2 font-light text-sm text-gray-500">
            Make sure it's spotless!
          </p>
    </div>
</div>
<div class="py-4 flex flex-col items-center">
  <a href="{{ url_for('views.home') }}"><button class="content-center bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 px-8 border-b-4 border-blue-700 hover:border-blue-500 rounded">
      Job Complete
    </button>
  </a>
</div>

{% endblock %}

{% block script %}
<script>
    
    const vehicle_img_box = document.getElementById('vehicle_img_box')
    const vehicle_img = document.getElementById('vehicle_img')

    function updateImage() {
    const [file] = vehicle_img.files
    vehicle_img_box.classList.add('bg-cover')
    vehicle_img_box.classList.add('bg-center')
    vehicle_img_box.classList.add('bg-no-repeat')
    vehicle_img_box.classList.add(`bg-[url('${URL.createObjectURL(file)}')]`)
    preview_vehicle_img.src = !file ? "/img/car_silhouette.png" : URL.createObjectURL(file)
    
  }
  
  vehicle_img.addEventListener('input', updateImage)

</script>
{% endblock %}